- comment: Mindmap Diagram
  begin: ^\s*(mindmap)
  beginCaptures:
    '1':
      name: keyword.control.mermaid
  patterns:
    - match: \%%.*
      name: comment
    - comment: :::Text
      match: !regex |-
        (\s*:::) # :::
        (\s*["$&\^/#.,?!;*+=<>\'\\\-\w\s]*) # Text
      captures:
        '1':
          name: keyword.control.mermaid
        '2':
          name: string
    - comment: ::icon(Text)
      match: !regex |-
        (\s*::icon) # ::icon
        (\s*\() # (
        (\s*["$&\^/#.,?!;*+=<>\'\\\-\w\s]*) # Text
        (\s*\)) # )
      captures:
        '1':
          name: keyword.control.mermaid
        '2':
          name: punctuation.parenthesis.open.mermaid
        '3':
          name: string
        '4':
          name: punctuation.parenthesis.close.mermaid
    - comment: (Id)(Shape Start)(Text)(Shape End)
      match: !regex |-
        (\s*["$&\^/#.,?!;:*+=<>\'\\\-\w\s]*) # Id
        (\s*\({1,2}|\){1,2}|\{\{|\[) # Start Shape
        (\s*["$&\^/#.,?!;:*+=<>\'\\\-\w\s]*) # Text
        (\s*\){1,2}|\({1,2}|\}\}|\]) # End Shape
      captures:
        '1':
          name: variable
        '2':
          name: keyword.control.mermaid
        '3':
          name: string
        '4':
          name: keyword.control.mermaid
    - match: ^(\s*["$&\^/#.,?!;:*+=<>\'\\\-\w\s]*)
      name: string
  end: (^|\G)(?=\s*[`:~]{3,}\s*$)